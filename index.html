<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>得点板</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="/socket.io/socket.io.js"></script>
        <style>
            * {
                font-size: 100px;
            }

            body {
                text-align: center;
            }

            .score, .scoreSize {
                font-size: 200px;
            }
            
            .left {
                margin: 0 10px 0 0;
            }
            
            .right {
                margin: 0 0 0 10px 0;
            }
        </style>
    </head>
    <body>
        <div class="name">
            <span id="left" class="left"></span>
            ：
            <span id="right" class="right"></span>
        </div>
        <div class="score" id="score">
            <span id="leftCnt" class="left scoreSize">0</span>
            ：
            <span id="rightCnt" class="right scoreSize">0</span>
        </div>
        <script>
        const socketio = io();
        var timeoutID;

        function finish(finishUser) {
            document.getElementById('score').innerText = finishUser+'の勝ち！';
        }
        
        socketio.on('name',function(name){
            var names = name.split('=');
            document.getElementById('left').innerText = names[0];
            document.getElementById('right').innerText = names[1];
        });
        socketio.on('left',function(left){
            document.getElementById('leftCnt').innerText = String(left);
            if(left >= 9){document.getElementById('leftCnt').style='color:red'}else{document.getElementById('leftCnt').style='color:black'}
            if(left === 11)finish(document.getElementById('left').innerText);
        });
        socketio.on('right',function(right){
            document.getElementById('rightCnt').innerText = String(right);
            if(right >= 9){document.getElementById('rightCnt').style='color:red'}else{document.getElementById('rightCnt').style='color:black'}
            if(left === 11)finish(document.getElementById('right').innerText);
        });
        socketio.on('reset',function(reset){
            location.reload();
            window.clearTimeout(finishId);
        });
        </script>
    </body>
</html>